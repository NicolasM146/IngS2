<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Registro de Usuario</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    
    <h1>Registrarse</h1>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul class="flashes">
          {% for category, message in messages %}
            <li class="{{ category }}">{{ message }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <form method="POST" action="{{ url_for('register.register') }}">
        <fieldset>
            <legend>Datos Personales</legend>

            <label for="nombre">Nombre:</label>
            <input type="text" name="nombre" value="{{ datos.nombre if datos else '' }}" required>

            <label for="dni">DNI:</label>
            <input type="text" name="dni" value="{{ datos.dni if datos else '' }}" required>

            <label for="nacionalidad">Nacionalidad:</label>
            <input type="text" name="nacionalidad" value="{{ datos.nacionalidad if datos else '' }}" required>

            <label for="email">Email:</label>
            <input type="email" name="email" value="{{ datos.email if datos else '' }}" required>

            <label for="telefono">Teléfono:</label>
            <input type="text" name="telefono" value="{{ datos.telefono if datos else '' }}" required>

            <label for="fecha_nacimiento">Fecha de Nacimiento:</label>
            <input type="date" name="fecha_nacimiento" value="{{ datos.fecha_nacimiento if datos else '' }}" required>

            <label for="username">Nombre de Usuario:</label>
            <input type="text" name="username" value="{{ datos.username if datos else '' }}" required>

            <label for="password">Contraseña:</label>
            <input type="password" name="password" required>
        </fieldset>

        <fieldset>
            <legend>Datos de Tarjeta (opcional)</legend>

            <label for="number">Número de Tarjeta:</label>
            <input type="text" name="number" value="{{ datos_tarjeta.number if datos_tarjeta else '' }}">

            <label for="expiration_date">Fecha de Expiración:</label>
            <input type="date" name="expiration_date" value="{{ datos_tarjeta.expiration_date if datos_tarjeta else '' }}">

            <label for="cvv">CVV:</label>
            <input type="text" name="cvv" value="{{ datos_tarjeta.cvv if datos_tarjeta else '' }}">
        </fieldset>

        <button type="submit">Registrarse</button>
    </form>
</body>
</html>
